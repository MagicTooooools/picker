---
title: Eè§†ç•Œ (DongguaTV Enhanced Edition)
url: https://ednovas.xyz/2025/12/31/dongguatv-enhanced/
source: EdNovasçš„å°ç«™
date: 2025-12-31
fetch_date: 2026-01-01T03:38:59.062315
---

# Eè§†ç•Œ (DongguaTV Enhanced Edition)

![avatar](https://cdn.jsdelivr.net/gh/wdm1732418365/CDN/New%20folder/icon.png)

[Articles

296](/archives/)

[Tags

369](/tags/)

[Categories

14](/categories/)

---

[ä¸»é¡µ | Home](https://navigate.ednovas.xyz)

[éšæœº | Random](/random.html)

[ç›®å½• | Categories](/categories/)

[å›å¿† | Archives](/archives/)

[å…³äºæˆ‘ | About](/about/)

[æœ‹å‹åœˆ | Link](/link/)

[æ‰“èµæ”¯æŒ | Support](/%E6%94%AF%E6%8C%81/)

[EdNovasçš„å°ç«™](/)

Search

[ä¸»é¡µ | Home](https://navigate.ednovas.xyz)

[éšæœº | Random](/random.html)

[ç›®å½• | Categories](/categories/)

[å›å¿† | Archives](/archives/)

[å…³äºæˆ‘ | About](/about/)

[æœ‹å‹åœˆ | Link](/link/)

[æ‰“èµæ”¯æŒ | Support](/%E6%94%AF%E6%8C%81/)

# Eè§†ç•Œ (DongguaTV Enhanced Edition)

Created2025-12-31|Updated2025-12-31|[ç¼–ç¨‹](/categories/%E7%BC%96%E7%A8%8B/)[è½¯ä»¶](/categories/%E7%BC%96%E7%A8%8B/%E8%BD%AF%E4%BB%B6/)[ç½‘ç«™](/categories/%E7%BC%96%E7%A8%8B/%E8%BD%AF%E4%BB%B6/%E7%BD%91%E7%AB%99/)

|Word count:6.4k|Reading time:23min|Post View:

è¿™æ˜¯ä¸€ä¸ªç»è¿‡å…¨é¢é‡æ„å’Œå‡çº§çš„ç°ä»£æµåª’ä½“èšåˆæ’­æ”¾å™¨ï¼ŒåŸºäº Node.js å’Œ Vue 3 æ„å»ºã€‚ç›¸æ¯”åŸç‰ˆ <https://github.com/Minerchu/dongguaTV> ï¼Œæœ¬ä½œæ·»åŠ äº†è®¸å¤šåŠŸèƒ½ã€‚

## æ¼”ç¤ºç½‘ç«™

[https://ednovas-test.vercel.app](https://ednovas-test.vercel.app/) ï¼ˆä¸åŒ…å«ä»»ä½•æ•°æ®ï¼‰

![image](https://github.com/user-attachments/assets/15392a90-9078-45b6-828d-829402669950)
![image](https://github.com/user-attachments/assets/d03543f5-34a4-414b-a131-62eda0af21b2)
![image](https://github.com/user-attachments/assets/e8bd4e14-dbd2-4d49-a1fc-7979c1ca22a4)

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§ (Core Features)

### 1. ğŸ¬ åŒå¼•æ“æ•°æ®é©±åŠ¨

* \*\*TMDb (The Movie Database)\*\*ï¼šæä¾›é«˜è´¨é‡çš„ç”µå½±/å‰§é›†å…ƒæ•°æ®ï¼ˆæµ·æŠ¥ã€èƒŒæ™¯å›¾ã€è¯„åˆ†ã€ç®€ä»‹ã€æ¼”èŒå‘˜è¡¨ï¼‰ã€‚
* **CMS èšåˆæº (Maccms)\*\*ï¼šå¯é›†æˆå¤šä¸ªè‡ªå®šä¹‰ç¬¬ä¸‰æ–¹èµ„æºç«™ APIï¼Œè‡ªåŠ¨è¿›è¡Œ**å…¨ç½‘æµ‹é€Ÿ\*\*ï¼Œæ™ºèƒ½è¿‡æ»¤å¤±æ•ˆæºï¼Œç¡®ä¿æ’­æ”¾æµç•…ã€‚

### 2. ğŸ” æ™ºèƒ½æœç´¢ä¸èšåˆ

* **å®æ—¶æµå¼æœç´¢ (SSE)\*\*ï¼šé‡‡ç”¨ Server-Sent Events æŠ€æœ¯ï¼Œæœç´¢ç»“æœ**è¾¹æœè¾¹æ˜¾\*\*ï¼Œå³æ—¶åé¦ˆï¼Œæ— éœ€ç­‰å¾…æ‰€æœ‰æºå“åº”ã€‚
* **æ™ºèƒ½å…³é”®è¯åŒ¹é…**ï¼šè‡ªåŠ¨ç”Ÿæˆæœç´¢å˜ä½“ï¼ˆå»é™¤å‰¯æ ‡é¢˜ã€å­£æ•°åç¼€ç­‰ï¼‰ï¼ŒåŒæ—¶æœç´¢ä¸­è‹±æ–‡åï¼Œå¤§å¹…æé«˜å‘½ä¸­ç‡ã€‚
* **è‡ªåŠ¨è‹±ä¸­ç¿»è¯‘**ï¼šæ£€æµ‹åˆ°è‹±æ–‡æœç´¢è¯æ—¶ï¼Œè‡ªåŠ¨é€šè¿‡ TMDB è·å–ä¸­æ–‡è¯‘åå¹¶ä¸€èµ·æœç´¢ï¼ˆå¦‚æœç´¢ â€œStranger Thingsâ€ ä¼šè‡ªåŠ¨æ·»åŠ  â€œæ€ªå¥‡ç‰©è¯­â€ï¼‰ï¼Œæ— éœ€å¤–éƒ¨ç¿»è¯‘ APIã€‚
* **è‡ªåŠ¨åˆ†ç»„ä¸å®æ—¶åˆå¹¶**ï¼šåŒä¸€å½±ç‰‡çš„ä¸åŒçº¿è·¯è‡ªåŠ¨èšåˆï¼Œæ–°æœç´¢åˆ°çš„æºå®æ—¶åˆå¹¶åˆ°å·²æœ‰å¡ç‰‡ï¼Œå³ä¸Šè§’æºæ•°é‡å®æ—¶è·³åŠ¨ã€‚
* **SQLite æ°¸ä¹…ç¼“å­˜**ï¼šå†…ç½®é«˜æ€§èƒ½ SQLite æ•°æ®åº“ç¼“å­˜ï¼Œæ”¯æŒæ— é™å­˜å‚¨ï¼Œè¯»å†™é€Ÿåº¦æå¿«ï¼Œçƒ­æœè¯ç§’çº§å“åº”ã€‚

### 3. ğŸ“º æ²‰æµ¸å¼æ’­æ”¾ä½“éªŒ

* **å½±é™¢æ¨¡å¼**ï¼šå…¨æ–°è®¾è®¡çš„æ’­æ”¾è¯¦æƒ…é¡µï¼Œé‡‡ç”¨æš—è‰²ç³»æ²‰æµ¸å¸ƒå±€ï¼Œæ”¯æŒå‰§é›†ç½‘æ ¼é€‰æ‹©ã€‚
* **æ™ºèƒ½çº¿è·¯æµ‹é€Ÿ**ï¼šæ”¯æŒç”¨æˆ·ç«¯ç›´è¿æµ‹é€Ÿå’ŒæœåŠ¡å™¨ä»£ç†æµ‹é€Ÿï¼ŒçœŸå®åæ˜ è§†é¢‘å¯ç”¨æ€§ã€‚
* **è‡ªåŠ¨æ•…éšœè½¬ç§»**ï¼šæ’­æ”¾å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå¯ç”¨çº¿è·¯ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚
* **æŠ•å±æ”¯æŒ**ï¼šé›†æˆ DLNA/AirPlay æœ¬åœ°æŠ•å±åŠŸèƒ½ï¼ˆéœ€æµè§ˆå™¨æ”¯æŒï¼‰ã€‚

### 4. ğŸŒ å¤§é™†ç”¨æˆ·ä¼˜åŒ–

* **æ™ºèƒ½ IP åŒé‡æ£€æµ‹**ï¼šé‡‡ç”¨ **Cloudflare Trace + ipapi.co** åŒé‡æ£€æµ‹æœºåˆ¶ï¼Œå‡†ç¡®ç‡é«˜ä¸”æ—  API é€Ÿç‡é™åˆ¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ° TMDB åä»£æ¨¡å¼ã€‚
* **æœ¬åœ°èµ„æºä¼˜å…ˆ**ï¼šæ ¸å¿ƒä¾èµ–åº“ï¼ˆVue, Bootstrap, DPlayer ç­‰ï¼‰å‡æœ¬åœ°åŒ–éƒ¨ç½²ï¼Œå½»åº•è§£å†³ CDN åŠ«æŒæˆ–åŠ è½½ç¼“æ…¢é—®é¢˜ï¼Œç§’å¼€æ— å‹åŠ›ã€‚
* **ä¸€é”®å®‰è£…è„šæœ¬**ï¼šæ”¯æŒäº¤äº’å¼é…ç½® API Keyã€åä»£åœ°å€ã€è¿è¡Œç«¯å£ã€‚

### 5. ğŸ“± å¤šç«¯æ”¯æŒ

* **Android TV / ç›’å­**ï¼šæä¾›ä¸“å± APK å®‰è£…åŒ…ï¼Œå®Œç¾é€‚é…ç”µè§†é¥æ§å™¨æ“ä½œï¼Œæ”¯æŒ Android TV æ¡Œé¢å¯åŠ¨ (Leanback Launcher)ã€‚
* **ç§»åŠ¨ç«¯ App**ï¼šåŸºäºç°ä»£ Web æŠ€æœ¯å°è£…ï¼Œæ”¯æŒ\*\*æ²‰æµ¸å¼çŠ¶æ€æ  (Immersive Status Bar)\*\*ï¼Œé¡¶éƒ¨æ— é»‘è¾¹ï¼Œå†…å®¹è‡ªåŠ¨é€‚é…åˆ˜æµ·å±ï¼Œä½“éªŒåŸç”Ÿçº§æµç•…ã€‚
* **PWA æ”¯æŒ**ï¼šæ”¯æŒæ·»åŠ åˆ°ä¸»å±å¹•ï¼Œå³ç‚¹å³ç”¨ã€‚

### 6. ğŸ”’ å®‰å…¨ä¸è®¿é—®æ§åˆ¶

* **å…¨å±€è®¿é—®å¯†ç **ï¼šæ”¯æŒè®¾ç½®å…¨å±€è®¿é—®å¯†ç ï¼Œä¸”æ”¯æŒ**è®°ä½ç™»å½•çŠ¶æ€é•¿è¾¾ 1 å¹´**ï¼Œæ—¢å®‰å…¨åˆä¾¿æ·ã€‚
* **è¿œç¨‹é…ç½®åŠ è½½**ï¼šæ”¯æŒä»è¿œç¨‹ URL åŠ è½½ `db.json` é…ç½®æ–‡ä»¶ï¼Œæ–¹ä¾¿å¤šç«™ç‚¹ç»Ÿä¸€ç®¡ç†ã€‚

---

## ğŸ¨ ç•Œé¢ä¸äº¤äº’å‡çº§ (UI/UX Upgrades)

ç›¸æ¯”åŸç‰ˆï¼Œæˆ‘ä»¬åœ¨ UI/UX ä¸Šåšäº†é¢ è¦†æ€§çš„æ”¹è¿›ï¼š

| åŠŸèƒ½åŒºåŸŸ | åŸç‰ˆä½“éªŒ | **MAX ç‰ˆä½“éªŒ** |
| --- | --- | --- |
| **é¦–é¡µè§†è§‰** | ç®€å•çš„åˆ—è¡¨ç½—åˆ— | **Netflix é£æ ¼ Hero è½®æ’­**ï¼šå…¨å±åŠ¨æ€èƒŒæ™¯ã€é«˜æ–¯æ¨¡ç³Šé®ç½©ã€Top 10 æ’åç‰¹æ•ˆã€‚ |
| **å¯¼èˆªæ ** | å›ºå®šé¡¶éƒ¨ | **æ™ºèƒ½èåˆå¯¼èˆª**ï¼šåˆå§‹é€æ˜ï¼Œæ»šåŠ¨å˜é»‘ï¼›åˆ†ç±»ç‚¹å‡»è‡ªåŠ¨å¹³æ»‘æ»šåŠ¨å®šä½ã€‚ |
| **æœç´¢æ¡†** | é¡¶éƒ¨å›ºå®šä½ç½® | **åŠ¨æ€äº¤äº’æœç´¢æ **ï¼šåˆå§‹å æ»¡å…¨å±ï¼Œä¸‹æ»‘è‡ªåŠ¨å¸é¡¶å¹¶ç¼©å°ä¸ºâ€èƒ¶å›Šâ€æ‚¬æµ®ã€‚ |
| **æ¦œå•æµè§ˆ** | æœ‰é™çš„é™æ€åˆ—è¡¨ | \*\*æ— é™æ»šåŠ¨ (Infinite Scroll)\*\*ï¼š20+ ä¸ªç»†åˆ†æ¦œå•ï¼Œæ”¯æŒå‘å³æ— é™åŠ è½½ã€‚ |
| **æœç´¢ä½“éªŒ** | éœ€ç­‰å¾… loading ç»“æŸ | \*\*å®æ—¶æµå¼åŠ è½½ (SSE)\*\*ï¼šç»“æœå³æ—¶å‘ˆç°ï¼Œæºæ•°é‡å®æ—¶è·³åŠ¨å¢åŠ ï¼Œæ‹’ç»æ¯ç‡¥ç­‰å¾…ã€‚ |
| **çº¿è·¯é€‰æ‹©** | å•ä¸€å»¶è¿Ÿæ˜¾ç¤º | **åŒæ¨¡å¼æµ‹é€Ÿ**ï¼šåŒºåˆ†â€ç›´è¿â€(ç”¨æˆ·ç«¯)å’Œâ€ä»£ç†â€(æœåŠ¡å™¨ç«¯) æµ‹é€Ÿï¼Œæ›´å‡†ç¡®ã€‚ |
| **æ’­æ”¾å¤±è´¥** | éœ€æ‰‹åŠ¨åˆ‡æ¢ | **è‡ªåŠ¨æ•…éšœè½¬ç§»**ï¼šæ£€æµ‹æ’­æ”¾å¤±è´¥åè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€å¯ç”¨çº¿è·¯ã€‚ |
| **å¯åŠ¨ä½“éªŒ** | é¡µé¢åˆ†å—åŠ è½½ | **ä¼˜é›…å¯åŠ¨å±**ï¼šæ–°å¢åº”ç”¨çº§å¯åŠ¨ç”»é¢ï¼Œèµ„æºåŠ è½½å®Œæˆåä¸æ»‘è¿‡æ¸¡ï¼Œæ‹’ç»ç™½å±ã€‚ |
| **åˆ†ç±»ç³»ç»Ÿ** | ä»…æ”¯æŒæœç´¢è·³è½¬ | **å…¨ç›´è¾¾æ¦œå•**ï¼šå†å²ã€å†’é™©ã€ç»¼è‰ºç­‰åˆ†ç±»å‡æ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®æµæ¦œå•ã€‚ |

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Tech Stack)

| ç±»åˆ« | æŠ€æœ¯ |
| --- | --- |
| **Frontend** | Vue.js 3 (CDN), Bootstrap 5, FontAwesome 6, DPlayer, HLS.js |
| **Backend** | Node.js, Express, Axios |
| **Data Sources** | TMDb API v3, 48+ Maccms CMS APIs |
| **Deployment** | Docker, Vercel, PM2, å®å¡”é¢æ¿ |
| **Cache** | Flexible: SQLite (Recommended), JSON File, or Memory |
| **Proxy** | Cloudflare Workers (for China users) |

---

## ğŸ”§ å‰ç½®å‡†å¤‡

### 1. âš ï¸ é…ç½®é‡‡é›†æº (é‡è¦)

æœ¬é¡¹ç›®**ä¸åŒ…å«**ä»»ä½•å†…ç½®çš„å½±è§†èµ„æºæ¥å£ã€‚åœ¨è¿è¡Œé¡¹ç›®å‰ï¼ˆæˆ–è¿è¡Œåï¼‰ï¼Œæ‚¨å¿…é¡»è‡ªè¡Œæ·»åŠ åˆæ³•çš„ Maccms V10 (JSONæ ¼å¼) æ¥å£æ‰èƒ½æœç´¢å’Œæ’­æ”¾è§†é¢‘ã€‚

**é…ç½®æ–¹æ³•ï¼š**
æ‰€æœ‰çš„é‡‡é›†æºé…ç½®å‡å­˜å‚¨åœ¨æ ¹ç›®å½•çš„ `db.json` æ–‡ä»¶ä¸­ã€‚

1. é¡¹ç›®åˆæ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆ `db.json`ï¼ˆå¦‚æœæœªç”Ÿæˆï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºæˆ–ä½¿ç”¨æ¨¡æ¿ï¼‰ã€‚
2. æ‰“å¼€ `db.json`ï¼Œæ‰¾åˆ° `sites` æ•°ç»„ã€‚
3. å¡«å…¥æ‚¨æ‰¾åˆ°çš„é‡‡é›†æ¥å£ä¿¡æ¯ï¼š

|  |
| --- |
| ``` {   "sites": [     {       "key": "unique_key1",       // å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆè‹±æ–‡å­—æ¯ï¼Œä¸å¯é‡å¤ï¼‰       "name": "ç«™ç‚¹åç§°1",         // æ˜¾ç¤ºåœ¨ç•Œé¢çš„åç§°       "api": "https://...",      // Maccms V10/JSON æ¥å£åœ°å€       "active": true             // æ˜¯å¦å¯ç”¨ (true/false)     },     {       "key": "unique_key2",       // å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆè‹±æ–‡å­—æ¯ï¼Œä¸å¯é‡å¤ï¼‰       "name": "ç«™ç‚¹åç§°2",         // æ˜¾ç¤ºåœ¨ç•Œé¢çš„åç§°       "api": "https://...",      // Maccms V10/JSON æ¥å£åœ°å€       "active": true             // æ˜¯å¦å¯ç”¨ (true/false)     }   ] } ``` |

4. ä¿å­˜æ–‡ä»¶å¹¶**é‡å¯æœåŠ¡**ã€‚

### 2. è·å– TMDb API Key (å¿…éœ€)

æœ¬é¡¹ç›®ä¾èµ– **The Movie Database (TMDb)** æä¾›å½±è§†å…ƒæ•°æ®ã€‚

1. æ³¨å†Œè´¦æˆ·ï¼šè®¿é—® [Create Account](https://www.themoviedb.org/signup) æ³¨å†Œå¹¶ç™»å½•ã€‚
2. ç”³è¯· APIï¼šè®¿é—® [API Settings](https://www.themoviedb.org/settings/api)ï¼Œç‚¹å‡» **â€œCreateâ€** æˆ– **â€œclick hereâ€** ç”³è¯·ã€‚
3. å¡«å†™ä¿¡æ¯ï¼šåº”ç”¨ç±»å‹é€‰æ‹© \*\*â€Developerâ€\*\*ï¼Œç®€å•å¡«å†™ç”¨é€”ï¼ˆå¦‚ â€œPersonal learning projectâ€ï¼‰ã€‚
4. è·å– Keyï¼šç”³è¯·é€šè¿‡åï¼Œå¤åˆ¶ **â€œAPI Key (v3 auth)â€** å¤‡ç”¨ã€‚

### 3. å¤§é™†ç”¨æˆ·ï¼šéƒ¨ç½² TMDB åä»£ (å¯é€‰)

ç”±äº TMDB åœ¨å¤§é™†æ— æ³•ç›´æ¥è®¿é—®ï¼Œéœ€è¦é…ç½®åå‘ä»£ç†ä»¥æ­£å¸¸æ˜¾ç¤ºæµ·æŠ¥å’Œå½±è§†ä¿¡æ¯ã€‚

#### æ–¹æ¡ˆä¸€ï¼šéƒ¨ç½² Cloudflare Workers åä»£ (æ¨è)

1. **ç™»å½• Cloudflare**

   * è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com/)
   * é€‰æ‹©å·¦ä¾§èœå• **â€œWorkers & Pagesâ€** â†’ **â€œCreate applicationâ€** â†’ **â€œCreate Workerâ€**
2. **éƒ¨ç½²åä»£ä»£ç **

   * ç»™ Worker å–åï¼ˆå¦‚ `tmdb-proxy`ï¼‰ï¼Œç‚¹å‡» **Deploy**
   * éƒ¨ç½²åç‚¹å‡» **â€œEdit codeâ€**
   * å¤åˆ¶ `cloudflare-tmdb-proxy.js` æ–‡ä»¶å†…å®¹ï¼Œç²˜è´´åˆ°ç¼–è¾‘å™¨
   * ç‚¹å‡» **â€œSave and Deployâ€**
3. **è·å– Worker URL**
    éƒ¨ç½²æˆåŠŸåè·å¾— URLï¼Œå¦‚ï¼š`https://tmdb-proxy.your-name.workers.dev`
4. **ç¨ååœ¨å®‰è£…æ—¶é…ç½®**
    åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

   |  |
   | --- |
   | ``` TMDB_PROXY_URL=https://tmdb-proxy.your-name.workers.dev ``` |

### 4. èµ„æºç«™ CORS ä»£ç† (å¯é€‰/æ¨è)

å½“æœåŠ¡å™¨æˆ–ç”¨æˆ·æ— æ³•ç›´æ¥è®¿é—®æŸäº›èµ„æºç«™æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é€šè¿‡ CORS ä»£ç†ä¸­è½¬è¯·æ±‚ã€‚

#### æ”¯æŒçš„åœºæ™¯

| åœºæ™¯ | æè¿° |
| --- | --- |
| **æœåŠ¡å™¨ç«¯æœç´¢** | æœåŠ¡å™¨æ— æ³•è®¿é—®èµ„æºç«™ API æ—¶ï¼Œè‡ªåŠ¨é€šè¿‡ä»£ç†æœç´¢ |
| **æœåŠ¡å™¨ç«¯è·å–è¯¦æƒ…** | åŒä¸Šï¼Œè·å–å½±ç‰‡è¯¦æƒ…æ—¶è‡ªåŠ¨å›é€€åˆ°ä»£ç† |
| **ç”¨æˆ·ç«¯è§†é¢‘æ’­æ”¾** | ç”¨æˆ·æµè§ˆå™¨æ— æ³•è®¿é—®è§†é¢‘æµæ—¶ï¼Œè‡ªåŠ¨ä»£ç†æ’­æ”¾ |
| **æ…¢é€Ÿçº¿è·¯ä¼˜åŒ–** | ç›´è¿å»¶è¿Ÿ >1500ms æ—¶ï¼Œè‡ªåŠ¨å°è¯•ä»£ç†ï¼Œé€‰æ‹©æ›´å¿«çš„æ–¹å¼ |

#### æ ¸å¿ƒåŠŸèƒ½

* âœ… **æ™ºèƒ½å­¦ä¹ **ï¼šè‡ªåŠ¨è®°ä½éœ€è¦ä»£ç†çš„ç«™ç‚¹ï¼ˆ24å°æ—¶æœ‰æ•ˆæœŸï¼‰
* âœ… **æ…¢é€Ÿæ£€æµ‹**ï¼šç›´è¿å»¶è¿Ÿè¶…è¿‡ 1.5 ç§’æ—¶ï¼Œè‡ªåŠ¨æµ‹è¯•ä»£ç†æ˜¯å¦æ›´å¿«
* âœ… **m3u8 é‡å†™**ï¼šè‡ªåŠ¨é‡å†™ m3u8 æ–‡ä»¶ä¸­çš„ ts åˆ†ç‰‡ URLï¼Œç¡®ä¿è§†é¢‘æµå®Œæ•´ä»£ç†
* âœ… **é˜²ç›—é“¾ç»•è¿‡**ï¼šè‡ªåŠ¨è®¾ç½®æ­£ç¡®çš„ Referer å’Œ Origin å¤´

#### å·¥ä½œåŸç†

**æœåŠ¡å™¨ç«¯ï¼ˆæœç´¢/è¯¦æƒ…ï¼‰ï¼š**

1. æœåŠ¡å™¨å…ˆå°è¯•ç›´æ¥è®¿é—®èµ„æºç«™ API
2. å¦‚æœç›´è¿å¤±è´¥æˆ–å»¶è¿Ÿè¿‡é«˜ï¼Œè‡ªåŠ¨é€šè¿‡ CORS ä»£ç†é‡è¯•
3. æˆåŠŸåä¼šâ€è®°ä½â€è¯¥ç«™ç‚¹éœ€è¦ä»£ç†ï¼Œåç»­è¯·æ±‚ç›´æ¥ä½¿ç”¨ä»£ç†

**ç”¨æˆ·ç«¯ï¼ˆæ’­æ”¾ï¼‰ï¼š**

1. ç”¨æˆ·ç«¯æµ‹é€Ÿæ—¶ï¼Œå…ˆå°è¯•ç›´æ¥è®¿é—®è§†é¢‘æµ
2. å¦‚æœç›´è¿å¤±è´¥æˆ–å»¶è¿Ÿ >1500msï¼Œè‡ªåŠ¨é€šè¿‡ CORS ä»£ç†é‡è¯•
3. ä»£ç†ä¼šé‡å†™ m3u8 å†…å®¹ï¼Œå°† ts åˆ†ç‰‡ URL ä¹Ÿæ”¹ä¸ºä»£ç† URL
4. UI ä¸Šä¼šæ˜¾ç¤ºä¸‰ç§çŠ¶æ€ï¼š
   * ğŸŸ¢ **ç›´è¿**ï¼šç”¨æˆ·ç«¯å¯ç›´æ¥è®¿é—®
   * ğŸŸ¡ **ä¸­è½¬**ï¼šé€šè¿‡ä»£ç†è®¿é—®
   * ğŸ”µ **æœåŠ¡**ï¼šæœåŠ¡å™¨ç«¯æµ‹é€Ÿï¼ˆæ— æ³•å®¢æˆ·ç«¯æµ‹è¯•ï¼‰

#### éƒ¨ç½² CORS ä»£ç† (Cloudflare Workers)

> âš ï¸ **å…³äºæµé‡é™åˆ¶çš„é£é™©æç¤º**ï¼š
> Cloudflare å…è´¹ç‰ˆ Workers æ¯æ—¥æœ‰è¯·æ±‚é™åˆ¶ (10ä¸‡æ¬¡)ï¼Œä¸”æ ¹æ®æ¡æ¬¾**ä¸å»ºè®®**ç”¨äºå¤§è§„æ¨¡é HTML å†…å®¹ï¼ˆå¦‚è§†é¢‘æµï¼‰çš„ä»£ç†ã€‚
>
> * **ä¸ªäººè‡ªç”¨**ï¼šé€šå¸¸æ²¡é—®é¢˜ã€‚
> * **å¤šäºº/é«˜é¢‘ä½¿ç”¨**ï¼šå¼ºçƒˆå»ºè®®ä½¿ç”¨ä¸‹æ–¹çš„ **VPS / Node.js** éƒ¨ç½²æ–¹æ¡ˆï¼Œä»¥å…è¢«å°å·ã€‚

1. **ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)**

   * è¿›å…¥ **Workers & Pages** â†’ **Create Worker**
   * å‘½åå¦‚ `cors-proxy`
2. **éƒ¨ç½²ä»£ç†ä»£ç **

   * å¤åˆ¶ `cloudflare-cors-proxy.js` æ–‡ä»¶**å…¨éƒ¨å†…å®¹**åˆ°ç¼–è¾‘å™¨
   * ç‚¹å‡» **â€œSave and Deployâ€**
   * è®°å½• Worker URLï¼ˆå¦‚ `https://cors-proxy.your-name.workers.dev`ï¼‰
3. **é…ç½® .env**

   |  |
   | --- |
   | ``` CORS_PROXY_URL=https://cors-proxy.your-name.workers.dev ``` |
4. **ï¼ˆå¯é€‰ï¼‰ç»‘å®šè‡ªå®šä¹‰åŸŸå**

   * Worker è®¾ç½® â†’ Triggers â†’ Custom Domains â†’ æ·»åŠ åŸŸå

> âš ï¸ **é‡è¦**ï¼šæ¯æ¬¡æ›´æ–° `cloudflare-cors-proxy.js` æ–‡ä»¶åï¼Œéœ€è¦é‡æ–°éƒ¨ç½²åˆ° Cloudflareï¼

#### éƒ¨ç½² CORS ä»£ç† (VPS / Node.js)

å¦‚æœæ‚¨æœ‰è‡ªå·±çš„æœåŠ¡å™¨ï¼Œæˆ–è€…æµé‡è¾ƒå¤§ï¼Œå»ºè®®ä½¿ç”¨æ­¤æ–¹å¼ã€‚

1. **å‡†å¤‡ç¯å¢ƒ**ï¼šç¡®ä¿ VPS å·²å®‰è£… Node.js (v18+)ã€‚
2. **ä¸Šä¼ ä»£ç **ï¼šä¸Šä¼  `proxy-server.js` åˆ°æœåŠ¡å™¨ã€‚
3. **å®‰è£…ä¾èµ– & è¿è¡Œ**ï¼š

   |  |
   | --- |
   | ``` # å®‰è£…ä¾èµ– npm install express axios cors dotenv  # å¯åŠ¨æœåŠ¡ PORT=8080 node proxy-server.js ``` |

   *æ¨èä½¿ç”¨ PM2 å®ˆæŠ¤è¿›ç¨‹ï¼š* `pm2 start proxy-server.js --name cors-proxy`
4. **é…ç½® .env**ï¼š

   |  |
   | --- |
   | ``` CORS_PROXY_URL=http://your-vps-ip:8080 ``` |

#### ä»£ç†å·¥ä½œæµç¨‹å›¾

|  |
| --- |
| ``` ç”¨æˆ·è¯·æ±‚ m3u8 è§†é¢‘         â†“    ä»£ç†è·å– m3u8         â†“   é‡å†™ ts åˆ†ç‰‡ URL    (æ”¹ä¸ºç»è¿‡ä»£ç†)         â†“   è¿”å›ä¿®æ”¹åçš„ m3u8         â†“ æ’­æ”¾å™¨è¯·æ±‚ ts åˆ†ç‰‡    (é€šè¿‡ä»£ç†,å¸¦æ­£ç¡® Referer)         â†“     è§†é¢‘æ­£å¸¸æ’­æ”¾ âœ“ ``` |

---

## ğŸ”’ å®‰å…¨é…ç½®ä¸è¿œç¨‹åŠ è½½ (é«˜çº§)

ä¸ºäº†ä¿æŠ¤æ‚¨çš„ç«™ç‚¹æˆ–ç»Ÿä¸€ç®¡ç†é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é«˜çº§åŠŸèƒ½ï¼š

### å…¨å±€è®¿é—®å¯†ç 

åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½® `ACCESS_PASSWORD` å³å¯å¼€å¯å…¨å±€å¯†ç ä¿æŠ¤ã€‚å¼€å¯åï¼Œç”¨æˆ·è®¿é—®ä»»ä½•é¡µé¢éƒ½éœ€è¦è¾“å…¥å¯†ç ã€‚

|  |
| --- |
| ``` ACCESS_PASSWORD=your_secure_password ``` |

### è¿œç¨‹é…ç½®æ–‡ä»¶ (db.json)

å¦‚æœæ‚¨æœ‰å¤šä¸ªç«™ç‚¹æˆ–å¸Œæœ›è¿œç¨‹æ›´æ–°é…ç½®ï¼Œå¯ä»¥è®©æœåŠ¡å™¨è¯»å–è¿œç¨‹çš„ ...